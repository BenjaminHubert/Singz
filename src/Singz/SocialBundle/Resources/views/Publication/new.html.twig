{% extends "SingzCoreBundle::layout.html.twig" %}

{% block title %}
	Nouvelle publication - {{ parent() }}
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('bundles/singzsocial/css/publication.css') }}">
	<style>
        #load {
          width:600px;
          height:36px;
          left:50%;
          top:40%;
          margin-left:-300px;
          overflow:visible;
          -webkit-user-select:none;
          -moz-user-select:none;
          -ms-user-select:none;
          user-select:none;
          cursor:default;
          display: none;
        }

        #load div {
          position:absolute;
          width:20px;
          height:36px;
          opacity:0;
          font-family:Helvetica, Arial, sans-serif;
          animation:move 2s linear infinite;
          -o-animation:move 2s linear infinite;
          -moz-animation:move 2s linear infinite;
          -webkit-animation:move 2s linear infinite;
          transform:rotate(180deg);
          -o-transform:rotate(180deg);
          -moz-transform:rotate(180deg);
          -webkit-transform:rotate(180deg);
          color:#d94f5c;
        }

        #load div:nth-child(2) {
          animation-delay:0.2s;
          -o-animation-delay:0.2s;
          -moz-animation-delay:0.2s;
          -webkit-animation-delay:0.2s;
        }
        #load div:nth-child(3) {
          animation-delay:0.4s;
          -o-animation-delay:0.4s;
          -webkit-animation-delay:0.4s;
          -webkit-animation-delay:0.4s;
        }
        #load div:nth-child(4) {
          animation-delay:0.6s;
          -o-animation-delay:0.6s;
          -moz-animation-delay:0.6s;
          -webkit-animation-delay:0.6s;
        }
        #load div:nth-child(5) {
          animation-delay:0.8s;
          -o-animation-delay:0.8s;
          -moz-animation-delay:0.8s;
          -webkit-animation-delay:0.8s;
        }
        #load div:nth-child(6) {
          animation-delay:1s;
          -o-animation-delay:1s;
          -moz-animation-delay:1s;
          -webkit-animation-delay:1s;
        }
        #load div:nth-child(7) {
          animation-delay:1.2s;
          -o-animation-delay:1.2s;
          -moz-animation-delay:1.2s;
          -webkit-animation-delay:1.2s;
        }

        @keyframes move {
          0% {
            left:0;
            opacity:0;
          }
        	35% {
        		left: 41%;
        		-moz-transform:rotate(0deg);
        		-webkit-transform:rotate(0deg);
        		-o-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	65% {
        		left:59%;
        		-moz-transform:rotate(0deg);
        		-webkit-transform:rotate(0deg);
        		-o-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	100% {
        		left:100%;
        		-moz-transform:rotate(-180deg);
        		-webkit-transform:rotate(-180deg);
        		-o-transform:rotate(-180deg);
        		transform:rotate(-180deg);
        		opacity:0;
        	}
        }

        @-moz-keyframes move {
        	0% {
        		left:0;
        		opacity:0;
        	}
        	35% {
        		left:41%;
        		-moz-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	65% {
        		left:59%;
        		-moz-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	100% {
        		left:100%;
        		-moz-transform:rotate(-180deg);
        		transform:rotate(-180deg);
        		opacity:0;
        	}
        }

        @-webkit-keyframes move {
        	0% {
        		left:0;
        		opacity:0;
        	}
        	35% {
        		left:41%;
        		-webkit-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	65% {
        		left:59%;
        		-webkit-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	100% {
        		left:100%;
        		-webkit-transform:rotate(-180deg);
        		transform:rotate(-180deg);
        		opacity:0;
        	}
        }

        @-o-keyframes move {
        	0% {
        		left:0;
        		opacity:0;
        	}
        	35% {
        		left:41%;
        		-o-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	65% {
        		left:59%;
        		-o-transform:rotate(0deg);
        		transform:rotate(0deg);
        		opacity:1;
        	}
        	100% {
        		left:100%;
        		-o-transform:rotate(-180deg);
        		transform:rotate(-180deg);
        		opacity:0;
        	}
        }
    </style>

{% endblock %}

{% block body %}
	<div class="new-publication">
		<h1>Ajouter une nouvelle publication</h1>
		<div>
        {# Ouverture de la balise <form> du formulaire HTML #}
        {{ form_start(form, {
        	'attr': {
        		'class': 'form-horizontal dropzone',
        		'id': 'dropzone'
        	}
        }) }}
            {# Les erreurs générales du formulaire. #}
            {{ form_errors(form) }}
        	{# LEGENDE #}
            <div class="form-group input-legende">
                {# Génération du label. #}
                <div class="col-md-2">
                    {{ form_label(form.description, "Légende", {
                    	'label_attr': {
                    		'class': 'control-label'
                    	}
                    }) }}
                </div>
                {# Affichage des erreurs pour ce champ précis. #}
                {{ form_errors(form.description) }}
                {# Génération de l'input. #}
                <div class="col-md-10">
                    {{ form_widget(form.description, {
                    	'attr': {
                    		'class': 'form-control'
                    	}
                    }) }}
                </div>
            </div>
        	{# VIDEO #}
            <div class="form-group input-video">
                {# Génération du label. #}
                <div class="col-md-2">
                    {{ form_label(form.video, "Video", {
                    	'label_attr': {
                    		'class': 'control-label'
                    	}
                    }) }}
                </div>
                {# Affichage des erreurs pour ce champ précis. #}
                {{ form_errors(form.video) }}
                {# Génération de l'input. #}
                <div class="col-md-10">
                    {{ form_widget(form.video) }}
										<label for="singz_socialbundle_publication_video_file" class="label-file-input"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg> <span>Choose a file&hellip;</span></label>
                </div>
            </div>

        	{# SAVE BUTTON #}
            <div class="form-group input-button">
                {# Génération de l'input. #}
                <div class="col-md-12">
                    {{ form_widget(form.save, {
                    	'attr': {
                    		'class': 'btn btn-default',
                    	}
                    }) }}
                </div>
            </div>

            {# Génération automatique des champs pas encore écrits.
            Dans cet exemple, ce serait le champ CSRF (géré automatiquement par Symfony !)
            et tous les champs cachés (type « hidden »). #}
            {{ form_rest(form) }}

            {# Fermeture de la balise <form> du formulaire HTML #}
        {{ form_end(form) }}
    </div>

    <div id="load">
        <div>G</div>
        <div>N</div>
        <div>I</div>
        <div>D</div>
        <div>A</div>
        <div>O</div>
        <div>L</div>
    </div>
	</div>
{% endblock %}


{% block end_javascripts %}
	<script>
		$(document).ready(function(){
			$('form').submit(function(){
				$('form').fadeOut('slow', function(){
					$('#load').fadeIn('slow');
				})
			});
		});
	</script>
{% endblock %}
